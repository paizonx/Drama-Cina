<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drachin - Gallery</title>
    <style>
        /* CSS Dark Mode Professional */
        body { margin: 0; font-family: 'Roboto', sans-serif; background-color: #0f0f0f; color: white; }
        
        .navbar { 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 20px; height: 60px; background: #0f0f0f; 
            position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #2a2a2a; 
        }
        .logo { font-size: 22px; font-weight: bold; color: white; text-decoration: none; display: flex; align-items: center; gap: 5px; }
        .logo span { color: #ff0000; }
        
        .nav-buttons a {
            text-decoration: none; color: white; font-size: 14px; font-weight: 500; margin-left: 15px;
        }
        .btn-vip {
            background-color: #cc0000; padding: 8px 15px; border-radius: 4px; color: white;
        }

        .container { padding: 20px; max-width: 1400px; margin: 0 auto; }
        
        /* Tempat Iklan */
        .ad-banner { 
            background: #1a1a1a; padding: 10px; border-radius: 8px; 
            margin-bottom: 25px; text-align: center; min-height: 100px;
        }

        .video-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 20px; row-gap: 30px;
        }

        .video-card { cursor: pointer; transition: 0.2s; }
        .video-card:hover { transform: scale(1.02); }
        
        .thumb-box {
            position: relative; width: 100%; aspect-ratio: 16/9; 
            background: #222; border-radius: 10px; overflow: hidden;
        }
        .thumb-box img { width: 100%; height: 100%; object-fit: cover; }
        .duration {
            position: absolute; bottom: 8px; right: 8px; 
            background: rgba(0,0,0,0.8); padding: 2px 6px; 
            border-radius: 4px; font-size: 11px;
        }

        .info { margin-top: 10px; display: flex; gap: 10px; }
        .avatar { width: 36px; height: 36px; background: #444; border-radius: 50%; flex-shrink: 0; }
        .text-info { display: flex; flex-direction: column; }
        .title { 
            font-size: 15px; font-weight: 600; line-height: 1.3; margin-bottom: 4px; color: #eee;
            display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
        }
        .meta { font-size: 13px; color: #aaa; }
    </style>

    <script type="text/javascript" src="https://ridernoodleacerbity.com/c9/c0/46/c9c04611f8fb3b0b21da4b49fb98d3fa.js"></script>
</head>
<body>

    <nav class="navbar">
        <a href="#" class="logo"><span>▶</span> Drachin</a>
        <div class="nav-buttons">
            <a href="https://ridernoodleacerbity.com/pu4v8n14t?key=280fea026bf240b90dd4b3343468c40f" target="_blank">Upload</a>
            <a href="https://ridernoodleacerbity.com/pu4v8n14t?key=280fea026bf240b90dd4b3343468c40f" target="_blank" class="btn-vip">Premium App</a>
        </div>
    </nav>

    <div class="container">
        <div class="ad-banner">
            <script async="async" data-cfasync="false" src="https://ridernoodleacerbity.com/8754c34f20e587c8ef08a064d9f71e59/invoke.js"></script>
            <div id="container-8754c34f20e587c8ef08a064d9f71e59"></div>
        </div>

        <div class="video-grid" id="mainGrid">
            <p style="color:#aaa; text-align:center; grid-column:1/-1;">Loading videos...</p>
        </div>
    </div>

    <script>
        // URL file database txt
        const DATABASE_URL = 'videos.txt';

        async function loadVideos() {
            try {
                // 1. Ambil data dari videos.txt
                const response = await fetch(DATABASE_URL + '?t=' + new Date().getTime()); // tambah timestamp agar tidak cache
                if (!response.ok) throw new Error('Gagal memuat database');
                const text = await response.text();

                // 2. Bersihkan Grid
                const grid = document.getElementById('mainGrid');
                grid.innerHTML = '';

                // 3. Proses setiap baris
                const lines = text.split('\n');
                
                lines.forEach(line => {
                    const parts = line.split('|');
                    // Pastikan ada ID dan Judul (minimal 2 bagian)
                    if (parts.length < 2) return;

                    const id = parts[0].trim();
                    const title = parts[1].trim();
                    if (!id) return;

                    // LOGIKA PINTAR:
                    // Jika ID dimulai dengan 'http', berarti link luar (?src=)
                    // Jika tidak, berarti ID Dailymotion (?id=)
                    let watchLink, thumbUrl;
                    
                    if (id.startsWith('http')) {
                        watchLink = `watch.html?src=${encodeURIComponent(id)}`;
                        thumbUrl = 'https://via.placeholder.com/640x360/222/fff?text=MOVIE'; // Default thumb untuk link luar
                    } else {
                        watchLink = `watch.html?id=${id}`;
                        // Coba tebak thumbnail Dailymotion
                        thumbUrl = `https://www.dailymotion.com/thumbnail/video/${id}`;
                    }
                    
                    // Backup image jika thumbnail error
                    const errorImg = "this.src='https://via.placeholder.com/640x360/111/fff?text=VIDEO'";

                    // Buat HTML Kartu
                    const card = document.createElement('div');
                    card.className = 'video-card';
                    card.onclick = () => window.location.href = watchLink;

                    card.innerHTML = `
                        <div class="thumb-box">
                            <img src="${thumbUrl}" onerror="${errorImg}" alt="${title}" loading="lazy">
                            <div class="duration">HD</div>
                        </div>
                        <div class="info">
                            <div class="avatar"></div>
                            <div class="text-info">
                                <div class="title">${title}</div>
                                <div class="meta">
                                    Drachin Official • ${Math.floor(Math.random() * 500) + 10}K views
                                </div>
                            </div>
                        </div>
                    `;
                    grid.appendChild(card);
                });

            } catch (error) {
                console.error(error);
                document.getElementById('mainGrid').innerHTML = '<p style="text-align:center; width:100%;">Gagal memuat daftar video. Pastikan file videos.txt ada.</p>';
            }
        }

        // Jalankan fungsi saat web dibuka
        loadVideos();
    </script>
</body>
</html>